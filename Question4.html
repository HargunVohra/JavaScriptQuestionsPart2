<!-- Q4) Write a JavaScript program to convert a comma-separated value (CSV) string to a 2D array of objects. The first row of the string is used as the title row.
Use Array.prototype.slice() and Array.prototype.indexOf('\n') and String.prototype.split(delimiter) to separate the first row (title row) into values.
Use String.prototype.split('\n') to create a string for each row, then Array.prototype.map() and String.prototype.split(delimiter) to separate the values in each row.
Use Array.prototype.reduce() to create an object for each row's values, with the keys parsed from the title row.
Omit the second argument, delimiter, to use a default delimiter of ,. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript program to convert a comma-separated value (CSV) string to a 2D array of objects. The first row of the string is used as the title row.</title>
</head>
<body>
    <script type="text/JavaScript">
        //#Source https://bit.ly/2neWfJ2
        const CSV_to_JSON = (data, delimiter = ',') => {
            const titles = data.slice(0, data.indexOf('\n')).split(delimiter);
            return data
            .slice(data.indexOf('\n') + 1)
            .split('\n')
            .map(v => {
                const values = v.split(delimiter);
                return titles.reduce((obj, title, index) => ((obj[title] = values[index]), obj), {});
            });
        };

        console.log(CSV_to_JSON('col1,col2\na,b\nc,d'));
        console.log(CSV_to_JSON('col1;col2\na;b\nc;d', ';'));
    </script>
</body>
</html>