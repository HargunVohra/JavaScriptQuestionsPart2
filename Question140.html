<!-- Q140) Write a JavaScript program to get the highest index at which value should be inserted into an array in order to maintain its sort order. This is based on a provided iterator function.
Loosely check if the array is sorted in descending order.
Use Array.prototype.map() to apply the iterator function to all elements of the array.
Use Array.prototype.reverse() and Array.prototype.findIndex() to find the appropriate last index where the element should be inserted, based on the provided iterator function. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript program to get the highest index at which value should be inserted into an array in order to maintain its sort order. This is based on a provided iterator function.</title>
</head>
<body>
    <script type="text/JavaScript">
        //#Source https://bit.ly/2neWfJ2 
        const sortedLastIndexBy = (arr, n, fn) => {
            const isDescending = fn(arr[0]) > fn(arr[arr.length - 1]);
            const val = fn(n);
            const index = arr
            .map(fn)
            .reverse()
            .findIndex(el => (isDescending ? val <= el : val >= el));
            return index === -1 ? 0 : arr.length - index;
        };
        console.log(sortedLastIndexBy([{ x: 4 }, { x: 5 }], { x: 4 }, o => o.x));
    </script>
</body>
</html>